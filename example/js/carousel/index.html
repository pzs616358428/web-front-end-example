<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>原生Js版本轮播图</title>
    <link rel="stylesheet" href="/web-front-end-example/public/css/reset.css">
    <style>
        .carousel {
            overflow: hidden;
            width: 800px;
            height: 400px;
            margin: 0 auto;
        }

        .carousel .carousel-inner {
            position: relative;
            left: 0;
            display: flex;
        }
    </style>
</head>
<body>
<!-- 轮播图容器 -->
<div class="carousel" id="carousel">
    <!-- 内部图片容器 -->
    <div class="carousel-inner" id="carousel-inner">
        <div class="carousel-item">
            <svg width="800" height="400">
                <rect fill="#777" width="100%" height="100%"></rect>
                <text fill="#555" dy=".3em" x="50%" y="50%">First slide</text>
            </svg>
        </div>
        <div class="carousel-item">
            <svg width="800" height="400">
                <rect fill="#666" width="100%" height="100%"></rect>
                <text fill="#444" dy=".3em" x="50%" y="50%">Second slide</text>
            </svg>
        </div>
        <div class="carousel-item">
            <svg width="800" height="400">
                <rect fill="#555" width="100%" height="100%"></rect>
                <text fill="#333" dy=".3em" x="50%" y="50%">Third slide</text>
            </svg>
        </div>
        <div class="carousel-item">
            <svg width="800" height="400">
                <rect fill="#777" width="100%" height="100%"></rect>
                <text fill="#555" dy=".3em" x="50%" y="50%">First slide</text>
            </svg>
        </div>
    </div>
</div>


<script>
    var offsetX = 0;

    window.onload = function () {
        // 获取容器节点
        var carouselInner = document.getElementById('carousel-inner');
        carouselInner.style.transition = 'left linear 300ms';
        // 启动定时器
        var carouselInterval = setInterval(function () {
            // x坐标减法
            offsetX -= 800;
            // 判断是是否是最后一帧
            if (offsetX === -2400) {
                carouselInner.style.left = offsetX + 'px';
                // 执行完动画之后取消动画效果
                setTimeout(function () {
                    carouselInner.style.transition = '';
                    carouselInner.style.left = 0 + 'px';
                    setTimeout(function () {
                        carouselInner.style.transition = 'left linear 300ms';
                    }, 100);
                }, 300);
            } else {
                carouselInner.style.left = offsetX + 'px';
            }

            // 判断最后一帧执行完复原x坐标
            if (offsetX === -2400) {
                offsetX = 0;
            }
        },1000);
    }
</script>

</body>
</html>